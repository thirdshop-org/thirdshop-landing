---
import Layout from "@/layouts/default.astro"
import { DEFAULT_LOCALE } from "astro:env/client";

const currentLocale = Astro.currentLocale || DEFAULT_LOCALE;

const app = {
    name: "Open Communication",
    slug: "open-communication",
    description: "Secure peer-to-peer communication and data sharing.",
    icon: "üí¨",
    status: "Alpha",
    // Mise √† jour de la stack technique
    techStack: ["Svelte", "Go", "SQLite", "WebRTC", "IPFS"],
    features: [
        {
            title: "End-to-End Encryption",
            description: "All messages and files are encrypted end-to-end. Only you and your recipient can read them.",
            icon: "üîí"
        },
        {
            title: "P2P Architecture",
            description: "Direct peer-to-peer connections mean faster data transfer and no central server bottlenecks.",
            icon: "‚ö°"
        },
        {
            title: "File Sharing",
            description: "Share files of any size directly with others without upload limits or third-party storage.",
            icon: "üìÇ"
        },
        {
            title: "Cross-Platform",
            description: "Works seamlessly across desktop, mobile, and web platforms thanks to our Go core.",
            icon: "üñ•Ô∏è"
        },
        {
            title: "No Registration",
            description: "Start communicating immediately without creating an account or providing personal information.",
            icon: "üë§"
        },
        {
            title: "Offline Support",
            description: "Local-first architecture using SQLite allows you to queue messages when offline.",
            icon: "üì°"
        }
    ],
}
---

<Layout>
    <!-- Background decoration similar to homepage for consistency -->
    <div class="fixed top-0 right-0 w-[500px] h-[500px] bg-violet-100/50 rounded-full blur-[100px] -mr-32 -mt-32 pointer-events-none -z-10"></div>

    <article class="py-12 md:py-20 max-w-7xl mx-auto flex flex-col gap-12 md:gap-16 relative">

        <!-- NAVIGATION BACK -->
        <div>
            <a href={`/${currentLocale}/`} class="inline-flex items-center gap-2 text-sm text-slate-500 hover:text-violet-600 transition-colors mb-8 group">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:-translate-x-1 transition-transform"><path d="m15 18-6-6 6-6"/></svg>
                Back to La Brique
            </a>

            <!-- HERO HEADER -->
            <div class="flex flex-col gap-6">
                <div class="flex items-center gap-4">
                    <span class="text-4xl md:text-5xl">{app.icon}</span>
                    <span class="px-3 py-1 bg-orange-50 border border-orange-200 text-orange-700 rounded-full text-xs font-bold uppercase tracking-wider">
                        {app.status}
                    </span>
                </div>
                
                <h1 class="text-5xl md:text-7xl font-bold font-serif text-slate-900 tracking-tight">
                    {app.name}
                </h1>
                
                <p class="text-xl md:text-2xl text-slate-600 max-w-3xl font-light leading-relaxed">
                    {app.description}
                </p>
            </div>
        </div>

        <!-- MAIN GRID: CONTENT + SIDEBAR -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 md:gap-12">
            
            <!-- COLONNE GAUCHE : About Narrative -->
            <div class="lg:col-span-8 flex flex-col gap-8">
                <div class="prose prose-lg prose-slate max-w-none">
                    <h3 class="font-serif text-2xl font-bold text-slate-900 mb-4">Architecture & Philosophy</h3>
                    <p class="text-slate-600 leading-relaxed">
                        Open Communication is a revolutionary peer-to-peer communication platform that puts privacy and security first. Unlike traditional messaging apps that route your data through central servers, Open Communication connects you directly with other users via <strong>LibP2P</strong> streams.
                    </p>
                    <p class="text-slate-600 leading-relaxed mt-4">
                        Built on a high-performance <strong>Go</strong> backend with a reactive <strong>Svelte</strong> frontend, the application is lightweight yet powerful. We use <strong>SQLite</strong> for robust local-first data storage, ensuring your message history is instantly available, even without an internet connection. No company can access your messages, and no government can compel us to hand over data we don't possess.
                    </p>
                </div>
            </div>

            <!-- COLONNE DROITE : Tech Stack Card -->
            <div class="lg:col-span-4">
                <div class="bg-slate-50 rounded-2xl p-6 border border-slate-200 sticky top-8">
                    <h3 class="font-serif text-lg font-bold text-slate-900 mb-6 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-violet-600"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                        Technical Stack
                    </h3>
                    
                    <div class="flex flex-wrap gap-2">
                        {app.techStack.map(tech => (
                            <span class="px-3 py-1.5 bg-white border border-slate-200 rounded-md text-sm font-medium text-slate-700 shadow-sm">
                                {tech}
                            </span>
                        ))}
                    </div>

                    <div class="mt-8 pt-6 border-t border-slate-200">
                        <div class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Module Type</div>
                        <div class="text-slate-900 font-medium">Core System Module</div>
                        <p class="text-sm text-slate-500 mt-1">Included by default in La Brique.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- FEATURES GRID -->
        <div class="border-t border-slate-100 pt-12">
            <h2 class="text-3xl font-serif font-bold text-slate-900 mb-8">Key Capabilities</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {app.features.map(feature => (
                    <div class="group p-6 rounded-2xl bg-white border border-slate-100 hover:border-violet-500 hover:shadow-lg hover:shadow-violet-500/5 transition-all duration-300">
                        <div class="w-10 h-10 rounded-lg bg-slate-50 text-xl flex items-center justify-center mb-4 group-hover:bg-violet-50 group-hover:scale-110 transition-transform">
                            {feature.icon}
                        </div>
                        <h3 class="text-lg font-bold text-slate-900 mb-2 font-serif">{feature.title}</h3>
                        <p class="text-sm text-slate-600 leading-relaxed">{feature.description}</p>
                    </div>
                ))}
            </div>
        </div>

    </article>
</Layout>
